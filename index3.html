<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width,initial-scale=1.0,user-scalable=0" />
		<title></title>
		<link rel="preload" href="./KATI.ttf" as="font" type="font/woff2" crossorigin>
	</head>
	<style type="text/css">
		@font-face {
			font-family: cyjianxk;
			src: url('./KATI.ttf')
		}

		html,
		body {
			height: 100%;
			width: 100%;
			overflow: hidden;
		}

		body {
			background-color: #000333;
		}

		* {
			margin: 0;
			padding: 0;
			font-family: cyjianxk, -apple-system, Helvetica, sans-serif;
		}

		.logo {
			position: absolute;
			top: -9px;
			right: -15px;
		}

		.logo img {
			width: 108px;
		}

		.title {
			position: absolute;
			top: 9%;
			left: 0;
			width: 100%;
			height: 60px;
			line-height: 60px;
			text-align: center;
			z-index: 10;
		}

		.title span {
			font-size: 32px;
			color: #fff;
		}

		.middle {
			width: 100%;
			height: 100vh;
			background-color: #000333;
			box-sizing: border-box;
			-moz-box-sizing: border-box;
			-webkit-box-sizing: border-box;
			overflow: hidden;
		}

		.main {
			position: absolute;
			right: 10px;
			top: 340px;
			width: 100%;
			font-size: 20px;
			color: #c4c6dc;
			text-align: center;

		}

		.main p {}

		.footer {
			position: absolute;
			left: 0;
			right: 0;
			bottom: 20%;
			width: 100%;
			color: #c4c6dc;
			text-align: center;
		}

		.footer p {
			font-size: 14px;
			line-height: 21px;
			color: #c4c6dc;

		}

		.footer p span {
			font-size: 16px;
			font-weight: 400;
			color: #ddd;

		}

		.footer_mtb10 {
			margin: 10px 0;
		}

		.footer p.footer_hold {
			font-size: 16px;
			font-weight: 400;
		}

		.footer_left {
			position: absolute;
			bottom: 16px;
			left: 5px;
			width: 30px;
			line-height: 16px;
			font-size: 12px;
			color: #c4c6dc;
			z-index: 20;

		}

		.footer_bottom {

			position: absolute;
			left: 0;
			right: 0;
			bottom: 16px;
			width: 100%;
			font-size: 12px;
			color: #c4c6dc;
			text-align: center;
		}

		#viewport {
			position: absolute;
			top: 15px;
			right: 0;
			background: #000333;
			z-index: 1;
		}

		.fa-codepen {
			-webkit-animation: fade 3s infinite alternate;
			-moz-animation: fade 3s infinite alternate;
			-o-animation: fade 3s infinite alternate;
			animation: fade 3s infinite alternate;
		}


		.title span {
			font-size: 32px;

			font-weight: 500;
			color: #ddd;
			transition: .25s;
		}

		.title .blue {
			position: absolute;
			width: 100%;
			left: 0;

			font-size: 32px;
			text-shadow: 2px 2px 1px rgba(0, 0, 0, .4), 0 0 20px #42A5F5, 0 0 40px rgba(33, 150, 243, .75), 0 0 50px rgba(33, 150, 243, .75), 0 0 60px rgba(33, 150, 243, .75);
		}

		.title .blue:before {
			content: '';
			position: absolute;
			background: rgba(66, 165, 245, .25);
			z-index: -1;
			opacity: .7;
			filter: blur(30px);
			width: 100%;
			height: 100%;
		}

		.buttons {
			margin-bottom: auto;
			margin-top: 20px;
		}

		button {
			margin: 0 5px;
			padding: 10px;
			letter-spacing: 1px;
			background: none;
			border: 2px solid #444;
			height: 2.25em;
			border-radius: 2.25em;
			color: #444;
			font-size: 1.25em;
			font-weight: bold;
			text-transform: uppercase;
			transition: .5s;
			outline: none;
		}

		button:nth-child(1):hover {
			/*Green*/
			color: #00E676;
			text-shadow: 0 0 7px #00E676;
			border-color: #00E676;
			box-shadow: 0 0 15px #00E676, inset 0 0 15px #00E676;
		}

		.jsfg {

			text-shadow: 2px 2px 1px rgba(0, 0, 0, .4), 0 0 20px #42A5F5, 0 0 40px rgba(33, 150, 243, .75), 0 0 50px rgba(33, 150, 243, .75), 0 0 60px rgba(33, 150, 243, .75);
			-webkit-animation: fadejsfg 5s infinite alternate;
			-moz-animation: fadejsfg 5s infinite alternate;
			-o-animation: fadejsfg 5s infinite alternate;
			animation: fadejsfg 5s infinite alternate;


		}

		button:nth-child(3):hover {
			/*Blue*/
			color: #2196F3;
			text-shadow: 0 0 7px #2196F3;
			border-color: #2196F3;
			box-shadow: 0 0 15px #2196F3, inset 0 0 15px #2196F3;
		}

		/*Animation*/


		@-moz-keyframes fadejsfg {
			0% {
				opacity: 1;
			}

			25% {
				opacity: 0.5;
			}

			50% {
				opacity: 1;
			}

			75% {
				opacity: 0.5;
			}

			100% {
				opacity: 1;
			}
		}

		@-webkit-keyframes fadejsfg {
			0% {
				opacity: 1;
			}

			25% {
				opacity: 0.5;
			}

			50% {
				opacity: 1;
			}

			75% {
				opacity: 0.5;
			}

			100% {
				opacity: 1;
			}
		}


		@-moz-keyframes fade {
			40% {
				opacity: 0.8;
			}

			42% {
				opacity: 0.1;
			}

			43% {
				opacity: 0.8;
			}

			45% {
				opacity: 0.1;
			}

			46% {
				opacity: 0.8;
			}
		}

		@-webkit-keyframes fade {
			40% {
				opacity: 0.8;
			}

			42% {
				opacity: 0.1;
			}

			43% {
				opacity: 0.8;
			}

			45% {
				opacity: 0.1;
			}

			46% {
				opacity: 0.8;
			}
		}

		@-o-keyframes fade {
			40% {
				opacity: 0.8;
			}

			42% {
				opacity: 0.1;
			}

			43% {
				opacity: 0.8;
			}

			45% {
				opacity: 0.1;
			}

			46% {
				opacity: 0.8;
			}
		}

		@keyframes fade {
			40% {
				opacity: 0.8;
			}

			42% {
				opacity: 0.1;
			}

			43% {
				opacity: 0.8;
			}

			45% {
				opacity: 0.1;
			}

			46% {
				opacity: 0.8;
			}
		}
	</style>

	<body>
		<div class="title">
			<div id="typedStrings">
				<!-- <p>信也科技</p> -->
				<p>研发中心年会邀请函</p>
			</div>
			<span id="span"></span>
		</div>
		<div class="logo"><img src="logo.png"></div>
		<div class="middle">
			<canvas id="middle"></canvas>
		</div>


		<!-- <div class="footer_left">科<br />技<br /><br />让<br />金<br />融<br />更<br />美<br />好</div> -->
		<div class="footer">
			<p>诚邀您于</p>
			<p><span>2019年12月30日 18:00</span></p>
			<p>前往</p>
			<p><span>新金桥路1599号东方万国宴会中心</span></p>
			<p class="footer_mtb10">与我们相聚</p>
			<p>&nbsp;</p>
			<p class="footer_hold"><span class="jsfg" style="font-size: 20px;">这里技术在发光</span></p>
		</div>
		<div class="footer_bottom">科技，让金融更美好!</div>
	</body>
</html>
<script src="https://cdn.bootcss.com/jquery/2.0.0/jquery.min.js" type="text/javascript" charset="utf-8"></script>

<script type="text/javascript">
	! function(t, s, e) {
		"use strict";
		var i = function(t, s) {
			var i = this;
			this.el = t, this.options = {}, Object.keys(r).forEach(function(t) {
					i.options[t] = r[t]
				}), Object.keys(s).forEach(function(t) {
					i.options[t] = s[t]
				}), this.isInput = "input" === this.el.tagName.toLowerCase(), this.attr = this.options.attr, this.showCursor = !
				this.isInput && this.options.showCursor, this.elContent = this.attr ? this.el.getAttribute(this.attr) : this.el.textContent,
				this.contentType = this.options.contentType, this.typeSpeed = this.options.typeSpeed, this.startDelay = this.options
				.startDelay, this.backSpeed = this.options.backSpeed, this.backDelay = this.options.backDelay, this.fadeOut = this
				.options.fadeOut, this.fadeOutClass = this.options.fadeOutClass, this.fadeOutDelay = this.options.fadeOutDelay, e &&
				this.options.stringsElement instanceof e ? this.stringsElement = this.options.stringsElement[0] : this.stringsElement =
				this.options.stringsElement, this.strings = this.options.strings, this.strPos = 0, this.arrayPos = 0, this.stopNum =
				0, this.loop = this.options.loop, this.loopCount = this.options.loopCount, this.curLoop = 0, this.stop = !1, this.cursorChar =
				this.options.cursorChar, this.shuffle = this.options.shuffle, this.sequence = [], this.build()
		};
		i.prototype = {
			constructor: i,
			init: function() {
				var t = this;
				t.timeout = setTimeout(function() {
					for (var s = 0; s < t.strings.length; ++s) t.sequence[s] = s;
					t.shuffle && (t.sequence = t.shuffleArray(t.sequence)), t.typewrite(t.strings[t.sequence[t.arrayPos]], t.strPos)
				}, t.startDelay)
			},
			build: function() {
				var t = this;
				if (this.showCursor === !0 && (this.cursor = s.createElement("span"), this.cursor.className = "typed-cursor",
						this.cursor.innerHTML = this.cursorChar, this.el.parentNode && this.el.parentNode.insertBefore(this.cursor,
							this.el.nextSibling)), this.stringsElement) {
					this.strings = [], this.stringsElement.style.display = "none";
					var e = Array.prototype.slice.apply(this.stringsElement.children);
					e.forEach(function(s) {
						t.strings.push(s.innerHTML)
					})
				}
				this.init()
			},
			typewrite: function(t, s) {
				if (this.stop !== !0) {
					this.fadeOut && this.el.classList.contains(this.fadeOutClass) && (this.el.classList.remove(this.fadeOutClass),
						this.cursor.classList.remove(this.fadeOutClass));
					var e = Math.round(70 * Math.random()) + this.typeSpeed,
						i = this;
					i.timeout = setTimeout(function() {
						var e = 0,
							r = t.substr(s);
						if ("^" === r.charAt(0)) {
							var o = 1;
							/^\^\d+/.test(r) && (r = /\d+/.exec(r)[0], o += r.length, e = parseInt(r)), t = t.substring(0, s) + t.substring(
								s + o)
						}
						if ("html" === i.contentType) {
							var n = t.substr(s).charAt(0);
							if ("<" === n || "&" === n) {
								var a = "",
									h = "";
								for (h = "<" === n ? ">" : ";"; t.substr(s + 1).charAt(0) !== h && (a += t.substr(s).charAt(0), s++, !(s +
										1 > t.length)););
								s++, a += h
							}
						}
						i.timeout = setTimeout(function() {
							if (s === t.length) {
								if (i.options.onStringTyped(i.arrayPos), i.arrayPos === i.strings.length - 1 && (i.options.callback(), i.curLoop++,
										i.loop === !1 || i.curLoop === i.loopCount)) return;
								i.timeout = setTimeout(function() {
									i.backspace(t, s)
								}, i.backDelay)
							} else {
								0 === s && i.options.preStringTyped(i.arrayPos);
								var e = t.substr(0, s + 1);
								i.attr ? i.el.setAttribute(i.attr, e) : i.isInput ? i.el.value = e : "html" === i.contentType ? i.el.innerHTML =
									e : i.el.textContent = e, s++, i.typewrite(t, s)
							}
						}, e)
					}, e)
				}
			},
			backspace: function(t, s) {
				var e = this;
				if (this.stop !== !0) {
					if (this.fadeOut) return void this.initFadeOut();
					var i = Math.round(70 * Math.random()) + this.backSpeed;
					e.timeout = setTimeout(function() {
						if ("html" === e.contentType && ">" === t.substr(s).charAt(0)) {
							for (var i = "";
								"<" !== t.substr(s - 1).charAt(0) && (i -= t.substr(s).charAt(0), s--, !(s < 0)););
							s--, i += "<"
						}
						var r = t.substr(0, s);
						e.replaceText(r), s > e.stopNum ? (s--, e.backspace(t, s)) : s <= e.stopNum && (e.arrayPos++, e.arrayPos ===
							e.strings.length ? (e.arrayPos = 0, e.shuffle && (e.sequence = e.shuffleArray(e.sequence)), e.init()) : e.typewrite(
								e.strings[e.sequence[e.arrayPos]], s))
					}, i)
				}
			},
			initFadeOut: function() {
				return self = this, this.el.className += " " + this.fadeOutClass, this.cursor.className += " " + this.fadeOutClass,
					setTimeout(function() {
						self.arrayPos++, self.replaceText(""), self.typewrite(self.strings[self.sequence[self.arrayPos]], 0)
					}, self.fadeOutDelay)
			},
			replaceText: function(t) {
				this.attr ? this.el.setAttribute(this.attr, t) : this.isInput ? this.el.value = t : "html" === this.contentType ?
					this.el.innerHTML = t : this.el.textContent = t
			},
			shuffleArray: function(t) {
				var s, e, i = t.length;
				if (i)
					for (; --i;) e = Math.floor(Math.random() * (i + 1)), s = t[e], t[e] = t[i], t[i] = s;
				return t
			},
			reset: function() {
				var t = this;
				clearInterval(t.timeout);
				this.el.getAttribute("id");
				this.el.textContent = "", "undefined" != typeof this.cursor && "undefined" != typeof this.cursor.parentNode &&
					this.cursor.parentNode.removeChild(this.cursor), this.strPos = 0, this.arrayPos = 0, this.curLoop = 0, this.options
					.resetCallback()
			}
		}, i["new"] = function(t, e) {
			var r = Array.prototype.slice.apply(s.querySelectorAll(t));
			r.forEach(function(t) {
				var s = t._typed,
					r = "object" == typeof e && e;
				s && s.reset(), t._typed = s = new i(t, r), "string" == typeof e && s[e]()
			})
		}, e && (e.fn.typed = function(t) {
			return this.each(function() {
				var s = e(this),
					r = s.data("typed"),
					o = "object" == typeof t && t;
				r && r.reset(), s.data("typed", r = new i(this, o)), "string" == typeof t && r[t]()
			})
		}), t.Typed = i;
		var r = {
			strings: ["These are the default values...", "You know what you should do?", "Use your own!", "Have a great day!"],
			stringsElement: null,
			typeSpeed: 0,
			startDelay: 0,
			backSpeed: 0,
			shuffle: !1,
			backDelay: 500,
			fadeOut: !1,
			fadeOutClass: "typed-fade-out",
			fadeOutDelay: 500,
			loop: !1,
			loopCount: !1,
			showCursor: !0,
			cursorChar: "|",
			attr: null,
			contentType: "html",
			callback: function() {},
			preStringTyped: function() {},
			onStringTyped: function() {},
			resetCallback: function() {}
		}
	}(window, document, window.jQuery);
</script>
<script>
	var UA = navigator.userAgent.toLowerCase();

	var env = {
		isAndroid: UA.indexOf('android') > 0,
		isIos: /iphone|ipad|ipod|ios/.test(UA),
	};
	$("#span").typed({
		stringsElement: $("#typedStrings"),
		typeSpeed: 70,
		showCursor: false,
		contentType: "html"
	});

	// print()
	var colors = [
		["blue", "#2196F3"]
	];
	var randomColor = colors[Math.floor(Math.random() * colors.length)];
	var initialColor = randomColor[0];
	var initialHeartColor = randomColor[1];

	function colorChange(color, heart) {
		$('#span').attr('class', '').addClass(color);
		$('body p i').css('color', initialHeartColor);
		$('body p i').css('color', heart);
	}
	colorChange(initialColor);


	var status = 0;

	init('科技无限', "middle")

	function init(txt, id) {


		var txtH = 80;
		var font = "sans-serif";
		var bg = "#fff";
		var rayColor1 = "#fff";
		var rayColor2 = "#42A5F5";
		var fade = 1;

		var canvas = document.getElementById(id);
		var ctx = canvas.getContext("2d");
		var cw = canvas.width = window.innerWidth;
		var ch = canvas.height = window.innerHeight / 2 + 120;

		var w2 = cw / 2;
		var h2 = ch / 2;
		var pi = Math.PI;
		var pi2 = pi * .5;

		var txtCanvas = document.createElement("canvas");
		var txtCtx = txtCanvas.getContext("2d");
		txtCtx.font = txtH - 30 + "px " + font;
		txtCtx.textBaseline = "middle";
		var txtW = Math.floor(txtCtx.measureText(txt).width);
		txtCanvas.width = txtW;
		txtCanvas.height = txtH * 1.5;

		var gradient = ctx.createRadialGradient(w2, h2, 0, w2, h2, txtW);
		gradient.addColorStop(0, rayColor2);
		gradient.addColorStop(1, rayColor1);
		ctx.strokeStyle = gradient;

		txtCtx.fillStyle = gradient;
		txtCtx.font = txtH - 30 + "px " + font;
		txtCtx.textBaseline = "middle";
		txtCtx.fillText(txt, 0, txtH * .5);

		//dirty adjust for descends
		txtH *= 1.5;

		var bufferCanvas = document.createElement("canvas");
		bufferCanvas.width = txtW;
		bufferCanvas.height = txtH;
		var buffer = bufferCanvas.getContext("2d");

		//text start position
		var sx = (cw - txtW) * 0.5
		var sy = (ch - txtH) * 0.5

		////generate data
		var rays = [];
		var txtData = txtCtx.getImageData(0, 0, txtW, txtH);
		for (var i = 0; i < txtData.data.length; i += 4) {
			var ii = i / 4;
			var row = Math.floor(ii / txtW)
			var col = ii % txtW
			var alpha = txtData.data[i + 3]
			if (alpha !== 0) {
				var c = "rgba("
				c += [txtData.data[i], txtData.data[i + 1], txtData.data[i + 2], alpha / 255]
				c += ")";
				rays.push(new Ray(Math.floor(ii / txtW), ii % txtW, c));
			}
		}

		var current = 1;
		//start animation
		tick();

		function tick() {
			ctx.clearRect(0, 0, cw, ch)
			ctx.drawImage(bufferCanvas, 0, 0, current, txtH, sx, sy, current, txtH)
			ctx.save()
			ctx.globalAlpha = .07;
			ctx.globalCompositeOperation = "lighter";
			if (drawRays(current)) {
				current++;
				current = Math.min(current, txtW)
				window.requestAnimationFrame(tick)
			} else {
				fadeOut()
			}
			ctx.restore()
		}

		function fadeOut() {
			ctx.clearRect(0, 0, cw, ch)
			ctx.globalAlpha *= .95;
			ctx.drawImage(bufferCanvas, 0, 0, current, txtH, sx, sy, current, txtH)
			if (ctx.globalAlpha > .31) {
				window.requestAnimationFrame(fadeOut)
			} else {
				if (status == 0) {
					status = 1;
					init("鼠你最猿", "middle")

				} else {
					status = 0;
					init('科技无限', "middle")
				}

				// window.setTimeout(restart, 500)
			}
		}

		function restart() {
			for (var i = 0; i < rays.length; i++) {
				rays[i].reset()
			}
			ctx.globalAlpha = 1
			buffer.clearRect(0, 0, txtW, txtH)
			current = 1;
			tick();
		}

		function drawRays(c) {
			var count = 0;
			ctx.beginPath()
			for (var i = 0; i < rays.length; i++) {
				var ray = rays[i];
				if (ray.col < c) {
					count += ray.draw()
				}
			}
			ctx.stroke()
			return count !== rays.length;
		}

		function filterRays(r) {
			return Boolean(r);
		}


		function Ray(row, col, f) {
			this.col = col;
			this.row = row;
			this.lines = []
			var xp = sx + col;
			var yp = sy + row;
			var fill = f;
			var ath = (txtH / 1.5)

			var a = pi2 * (this.row - ath * .5) / ath;
			if (a === 0) {
				a = (Math.random() - .5) * pi2;
			}
			var da = .02 * Math.sign(a);
			da += (Math.random() - .5) * .005;
			var l = 0;
			var dl = Math.random() * 2 + 2;

			var buffered = false;
			this.reset = function() {
				a = pi2 * (this.row - ath * .5) / ath;
				if (a === 0) {
					a = -pi2 * .5;
				}
				l = 0;
				buffered = false
			}

			this.draw = function() {
				if (l < 0) {
					if (!buffered) {
						buffer.fillStyle = fill;
						buffer.fillRect(this.col, this.row, 1, 1);
						buffered = true
					}
					return 1;
				} else {


					if (env.isIos) {
						ctx.beginPath();
						ctx.moveTo(xp, yp)
						ctx.lineTo(xp + Math.cos(a) * l, yp + Math.sin(a) * l);
						ctx.strokeStyle = "lightblue";
						ctx.lineWidth = 1;
						ctx.stroke();
					} else {
						ctx.moveTo(xp, yp)
						ctx.lineTo(xp + Math.cos(a) * l, yp + Math.sin(a) * l);
					}

					a += da;
					l += Math.cos(a) * dl;
					return 0;
				}
			}
		}
	}
</script>
